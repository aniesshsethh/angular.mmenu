angular.module("angular-mmenu",[]).directive("mmenu",function(){var n="angular-mmenu-id",e=function(n,e){return void 0===e||null===e?e=null:null!==n[e]&&void 0!==n[e]&&(e=n[e]),e},t=function(n,e){var t=null;if(null===e.href||void 0===e.href)t=$("<span />");else{var a=$("<a />");"function"==typeof e.href?a.attr("href","javascript:void(0);").click(function(n){n.preventDefault();var t=e.href;t()}):"#"===e.href||""===e.href?a.attr("href","javascript:void(0);"):a.attr("href",e.href),t=a}if(angular.isString(e.text))t.text(e.text);else{var u=e.text;t.html(u.getText());var l=u.onTextChanged(function(n){t.html(n)});t.data("mmenu-dynamic-text",u).data("mmenu-dynamic-text-listener",l),t.on("remove",function(){var n=t.data("mmenu-dynamic-text");if(null===n||void 0===n)return null;var e=t.data("mmenu-dynamic-text-listener");n.detachHandler(e)})}if(n.append(t),null!==e.items&&void 0!==e.items&&angular.isArray(e.items)&&e.items.length>0){var m=$("<ul />");e.items.forEach(function(n){i(m,n)}),n.append(m)}},i=function(n,e){var i=$("<li/>");null!==e&&void 0!==e&&(t(i,e),null!==e.$class&&void 0!==e.$class&&i.addClass(e.$class)),n.append(i)},a=function(t,a){var u=a.mmenuId;if(null===u||void 0===u||""===u)return void console.warn("No angular-mmenu id is specified");var l=null,m=null,r=$("["+n+"="+u+"]");if(0===r.length)return void console.warn("No angular-mmenu host was found");var o=t[a.mmenuItems];(null===o||void 0===o)&&(o=new Array),"nav"===r[0].localName?(r.empty(),m=r.data("mmenu"),l=r):l=$('<nav id="'+u+'" />');var d=$("<ul />");if(l.append(d),o.forEach(function(n){i(d,n)}),null===m||void 0===m){var v=angular.element(l),c=angular.element(r);c.replaceWith(v);var s=e(t,a.mmenuOptions),f=e(t,a.mmenuParams);console.log("mmenu",u,s,f),l.attr(n,u),$(document).ready(function(){l.mmenu(s,f)})}else null!=m._init&&void 0!==m._init?m._init():null!=m.init&&void 0!==m.init?m.init(d):console.error("angular mmenu could not be reinitialized due to missing init api method.")},u=function(n,e,t){null!==t.mmenuInvalidate&&void 0!==t.mmenuInvalidate&&""!==t.mmenuInvalidate&&(e[t.mmenuInvalidate]=function(){a(e,t)}),e.$watchCollection(t.mmenuItems,function(n){a(e,t)})};return{restrict:"E",replace:!0,link:function(e,t,i){return null==i.mmenuItems||void 0==i.mmenuItems?(console.warn("mmenu-items attribute is not specified. No MMenu is created."),void t.remove()):null==i.mmenuId||void 0==i.mmenuId?(console.warn("mmenu-id attribute is not specified. No MMenu is created."),void t.remove()):(t.attr(n,i.mmenuId),void u(i.mmenuId,e,i))}}});